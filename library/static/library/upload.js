// Generated by CoffeeScript 1.3.1
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };

  Library.BookUploader = (function(_super) {

    __extends(BookUploader, _super);

    BookUploader.name = 'BookUploader';

    function BookUploader() {
      BookUploader.__super__.constructor.apply(this, arguments);
      this.qq_uploader = new qq.FileUploader({
        element: this.el[0],
        action: Library.Book.url,
        allowedExtensions: ['pdf'],
        debug: true,
        template: '\
                <div class="qq-uploader">\
                    <div class="qq-upload-drop-area well">\
                        Drop files here to upload\
                    </div>\
                    <div class="row">\
                        <div class="qq-upload-button btn btn-primary pull-right">\
                            Upload a file\
                        </div>\
                    </div>\
                    <ul class="qq-upload-list"></ul>\
                </div>\
            ',
        fileTemplate: '<li>\
                <span class="qq-upload-file"></span>\
                <span class="qq-upload-spinner"></span>\
                <span class="qq-upload-size"></span>\
                <div class="qq-upload-spinner progress">\
                    <div class="bar"></div>\
                </div>\
                <a class="qq-upload-cancel" href="#">Cancel</a>\
                <span class="qq-upload-failed-text">Failed</span>\
                </li>\
            ',
        onProgress: function(id, fileName, loaded, total) {
          var $bar, percent;
          percent = loaded / total * 100;
          $bar = $('.bar', $('.qq-upload-list li')[id]);
          return $bar.css('width', "" + percent + "%");
        }
      });
    }

    return BookUploader;

  })(Spine.Controller);

  $(function() {
    return Library.book_uploader = new Library.BookUploader({
      el: $('#file-uploader')
    });
  });

}).call(this);
